<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <title>ì†Œì› íŠ¸ë¦¬</title>
    <style>
        /* [í°íŠ¸ ì •ì˜ ì¶”ê°€] ê°•ì›êµìœ¡ìƒˆìŒ */
        @font-face {
            font-family: 'GangwonEducationSaeum';
            src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2201-2@1.0/GangwonEduSaeeum_OTFMediumA.woff') format('woff');
            font-weight: normal;
            font-display: swap;
        }

        body {
            /* í°íŠ¸ ì ìš© */
            font-family: 'GangwonEducationSaeum', sans-serif;
            color: white;
            text-align: center;
            padding-top: 40px;
            letter-spacing: -6%;
            margin: 0;

            background: url('./src/tree/BG_tree.png') no-repeat center top fixed;
            background-size: auto 100vh;

            height: 100vh;
            overflow: hidden;

            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
        }

        h1 {
            margin-bottom: 20px;
            font-size: 40px;
            /* í°íŠ¸ íŠ¹ì„±ì— ë§ì¶° ì¡°ê¸ˆ í‚¤ì›€ */
            text-shadow: 0 0 10px rgba(21, 143, 15, 0.156), 0 0 20px rgba(21, 143, 15, 0.156);
        }

        p {
            margin-bottom: 30px;
            font-size: 24px;
            text-shadow: 0 0 5px rgba(21, 143, 15, 0.156);
        }

        #tree-container {
            width: 100%;
            max-width: 600px;
            height: calc(100vh - 150px);
            overflow: hidden;

            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            padding-bottom: 40px;
        }

        #wish-list {
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
        }

        .wish-card {
            background: transparent;
            box-shadow: none;

            padding: 5px 0;
            margin: 2px 0;

            color: #ffffff;
            text-shadow:
                -1px -1px 0 rgba(21, 143, 15, 0.156),
                1px -1px 0 rgba(21, 143, 15, 0.156),
                -1px 1px 0 rgba(21, 143, 15, 0.156),
                1px 1px 0 rgba(21, 143, 15, 0.156),
                0 0 10px rgba(21, 143, 15, 0.156);

            /* [í°íŠ¸ í¬ê¸° ì¡°ì •] ì†ê¸€ì”¨ í°íŠ¸ëŠ” ì–‡ì•„ì„œ ê¸°ì¡´ë³´ë‹¤ í‚¤ì›Œì•¼ ì˜ ë³´ì…ë‹ˆë‹¤ */
            font-size: 30px;
            font-weight: normal;
            /* ì´ í°íŠ¸ëŠ” boldê°€ ì—†ê±°ë‚˜ ë­‰ê°œì§ˆ ìˆ˜ ìˆì–´ normal ê¶Œì¥ */

            animation: slideUp 0.5s ease-out;
            word-break: keep-all;
            width: 100%;
            text-align: center;

            flex-shrink: 0;
        }

        @keyframes slideUp {
            0% {
                opacity: 0;
                transform: translateY(20px);
            }

            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>

<body>

    <h1></h1>
    <p></p>

    <div id="tree-container">
        <div id="wish-list"></div>
    </div>

    <script>
        const WSS_URL = "wss://12spzvb7ok.execute-api.ap-southeast-2.amazonaws.com/production/";
        const ws = new WebSocket(WSS_URL);

        let wishCount = 0;
        const MAX_WISHES_DISPLAYED = 10;
        const wishList = document.getElementById("wish-list");

        ws.onopen = () => console.log("ğŸ“¡ ì„œë²„ ì—°ê²° ì„±ê³µ! (tree)");

        ws.onmessage = (event) => {
            console.log("ğŸ“© ë©”ì‹œì§€ ë„ì°©:", event.data);
            try {
                const data = JSON.parse(event.data);
                if (data.message) {
                    addWish(data.message);
                }
            } catch (e) {
                console.log("ë¬´ì‹œëœ ë©”ì‹œì§€:", event.data);
            }
        };

        function addWish(text) {
            const div = document.createElement("div");
            div.className = "wish-card";
            div.textContent = text;

            wishList.appendChild(div);
            wishCount++;

            if (wishList.children.length > MAX_WISHES_DISPLAYED) {
                wishList.removeChild(wishList.children[0]);
            }
        }
    </script>
</body>

</html>