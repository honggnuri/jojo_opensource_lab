<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8" />
    <title>ì¡°í˜•ëŒ€ ì†Œì›íŠ¸ë¦¬</title>
   <style>
    /* ---------------------------
       1) ë¹„íŠ¸ë¹„íŠ¸ í°íŠ¸ ì¶”ê°€
    ----------------------------*/
    @font-face {
        font-family: 'DnfBitbeatV2';
        src: url('//cdn.df.nexon.com/img/common/font/DNFBitBitv2.otf') format('opentype');
        font-weight: 400;
        font-display: swap;
    }

   body {
    font-family: 'GangwonEducationSaeum', sans-serif;
    color: white;
    text-align: center;
    padding-top: 40px;
    margin: 0;

    background: url('./src/tree/BG_tree.png') no-repeat center top fixed;
    background-size: auto 100vh;

    height: 100vh;
    overflow: visible; /* â˜… ë³€ê²½ */
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
}

#tree-container {
    width: 100%;
    height: 100vh; /* â˜… ìœ„ì‹œ ìŒ“ì¼ ê³µê°„ í™•ë³´ */
    display: flex;
    justify-content: center;
    overflow: visible;
}

#wish-list {
    display: flex;
    flex-direction: column;
    gap: 20px;
    overflow: visible;
}

.wish-card {
    font-size: 32px;
    padding: 10px 20px;
    animation: fadeIn 0.4s ease-out;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}


</style>

</head>

<body>

    <h1>ì¡°í˜•ëŒ€ ì†Œì›íŠ¸ë¦¬</h1>
    <p></p>

    <div id="tree-container">
        <div id="wish-list"></div>
    </div>

    <script>
        const WSS_URL = "wss://12spzvb7ok.execute-api.ap-southeast-2.amazonaws.com/production/";
        const ws = new WebSocket(WSS_URL);

        let wishCount = 0;
        const MAX_WISHES_DISPLAYED = 10;
        const wishList = document.getElementById("wish-list");

        ws.onopen = () => console.log("ğŸ“¡ ì„œë²„ ì—°ê²° ì„±ê³µ! (tree)");

        ws.onmessage = (event) => {
            console.log("ğŸ“© ë©”ì‹œì§€ ë„ì°©:", event.data);
            try {
                const data = JSON.parse(event.data);
                if (data.message) {
                    addWish(data.message);
                }
            } catch (e) {
                console.log("ë¬´ì‹œëœ ë©”ì‹œì§€:", event.data);
            }
        };

        function addWish(text) {
            const div = document.createElement("div");
            div.className = "wish-card";
            div.textContent = text;

            wishList.appendChild(div);
            wishCount++;

            if (wishList.children.length > MAX_WISHES_DISPLAYED) {
                wishList.removeChild(wishList.children[0]);
            }
        }
    </script>
</body>

</html>